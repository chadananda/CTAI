---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

let articles = [];
try {
  articles = await getCollection('articles');
  articles.sort((a, b) => (b.data.date || '').localeCompare(a.data.date || ''));
} catch {
  // No articles yet
}
---

<Base title="Articles" description="Technical articles on AI-assisted translation, Arabic/Persian text processing, and the CTAI project.">
  <div class="max-w-3xl mx-auto">
    <header class="mb-10">
      <h1 class="text-3xl font-light text-gold-100 tracking-tight mb-2">Articles</h1>
      <p class="text-sm text-ink-400 leading-relaxed">
        Technical deep-dives on translation methodology, Arabic/Persian text processing, and AI-assisted scholarship.
      </p>
    </header>

    {articles.length > 0 ? (
      <div class="space-y-4">
        {articles.map(article => (
          <a href={`/articles/${article.id.replace(/\.md$/, '')}/`}
             class="group block p-5 bg-ink-850 rounded-xl border border-ink-700/40 hover:border-gold-500/30 transition-all">
            <h2 class="text-lg text-ink-100 group-hover:text-gold-300 transition-colors mb-1.5">{article.data.title}</h2>
            {article.data.excerpt && (
              <p class="text-sm text-ink-400 leading-relaxed line-clamp-2">{article.data.excerpt}</p>
            )}
            <div class="flex items-center gap-3 mt-3">
              {article.data.author && (
                <span class="text-[10px] text-ink-500 font-mono">{article.data.author}</span>
              )}
              {article.data.author && article.data.date && (
                <span class="w-px h-3 bg-ink-700"></span>
              )}
              {article.data.date && (
                <time class="text-[10px] text-ink-500 font-mono">{article.data.date}</time>
              )}
            </div>
          </a>
        ))}
      </div>
    ) : (
      <div class="p-8 bg-ink-850 rounded-xl border border-ink-700/40 text-center">
        <p class="text-ink-500">Articles coming soon.</p>
      </div>
    )}
  </div>
</Base>
