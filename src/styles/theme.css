/* ── CTAI Theme ──
   Central color definitions. Tailwind classes (ink-800, gold-400 etc.)
   resolve through these variables, so changing values here repaints the
   entire site.  RGB-channel format enables Tailwind opacity modifiers
   (bg-ink-800/50).  Semantic tokens use light-dark() for future light mode.
*/

:root {
  color-scheme: dark;

  /* ── Palette: ink (warm neutrals) ── */
  --ink-950: 12 10 9;
  --ink-900: 26 23 20;
  --ink-850: 38 34 30;
  --ink-800: 54 48 42;
  --ink-700: 74 66 58;
  --ink-600: 96 88 80;
  --ink-500: 128 120 112;
  --ink-400: 172 166 160;
  --ink-300: 218 214 210;
  --ink-200: 234 231 228;
  --ink-100: 245 245 244;

  /* ── Palette: gold (accent) ── */
  --gold-50:  253 249 239;
  --gold-100: 249 240 212;
  --gold-200: 242 222 168;
  --gold-300: 234 200 114;
  --gold-400: 226 173 68;
  --gold-500: 217 148 44;
  --gold-600: 192 117 35;
  --gold-700: 160 87 31;
  --gold-800: 131 69 32;
  --gold-900: 108 58 30;

  /* ── Semantic tokens ──
     light-dark(light-value, dark-value)
     Currently color-scheme:dark so dark values apply.
     Flip to color-scheme:light (or auto) to enable light mode. */
  --page-bg:         light-dark(#faf8f5, #1a1714);
  --surface:         light-dark(#ffffff, #36302a);
  --surface-hover:   light-dark(#f5f0e6, #4a423a);
  --border:          light-dark(#e0d8cc, #4a423a);
  --border-subtle:   light-dark(#ebe5da, #36302a);
  --text-heading:    light-dark(#1a1714, #d6d3d1);
  --text-body:       light-dark(#3d3630, #a8a29e);
  --text-muted:      light-dark(#78716c, #78716c);
  --text-faint:      light-dark(#a8a29e, #57504a);
  --accent:          light-dark(#c07523, #e2ad44);
  --accent-hover:    light-dark(#a0571f, #eac872);
  --accent-muted:    light-dark(#d9942c, #e2ad4466);
  --selection-bg:    light-dark(#e2ad4444, #e2ad4466);
  --selection-text:  light-dark(#1a1714, #fdf9ef);
  --focus-ring:      light-dark(#c07523, #e2ad44);
}

/* ── Global styles using semantic tokens ── */
html { scroll-behavior: smooth; }

::selection {
  background: var(--selection-bg);
  color: var(--selection-text);
}

:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

body {
  background-color: var(--page-bg);
  background-image:
    url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
}

@keyframes grain {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-1%, -1%); }
  30% { transform: translate(1%, 0%); }
  50% { transform: translate(-1%, 1%); }
  70% { transform: translate(1%, -1%); }
  90% { transform: translate(0%, 1%); }
}

/* ── Book cover animations ── */
.hero-cover-wrapper {
  perspective: 1000px;
  transform-style: preserve-3d;
}
.hero-cover {
  border-radius: 8px;
  filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.5));
  animation: gentle-sway 6s ease-in-out infinite;
  will-change: transform;
}
.hero-cover:hover {
  animation: none;
  transform: rotateY(-2deg) rotateX(0deg) scale(1.02);
  filter: drop-shadow(0 24px 48px rgba(0, 0, 0, 0.6));
  transition: transform 0.4s ease, filter 0.4s ease;
}
@keyframes gentle-sway {
  0%, 100% { transform: rotateY(-12deg) rotateX(3deg) translateY(0); }
  50% { transform: rotateY(2deg) rotateX(-1deg) translateY(-6px); }
}
@media (max-width: 768px) {
  .hero-cover {
    max-width: 180px;
    margin: 0 auto;
    animation: none;
    transform: rotateY(0) rotateX(0);
  }
}

/* Cover tilt for index listing */
.cover-perspective {
  perspective: 800px;
}
.cover-tilt-right {
  transform: rotateY(-6deg);
  filter: drop-shadow(8px 12px 24px rgba(0, 0, 0, 0.5));
}
.cover-tilt-left {
  transform: rotateY(6deg);
  filter: drop-shadow(-8px 12px 24px rgba(0, 0, 0, 0.5));
}
.group:hover .cover-tilt-right,
.group:hover .cover-tilt-left {
  transform: rotateY(0deg) scale(1.03);
  filter: drop-shadow(0 16px 32px rgba(0, 0, 0, 0.6));
}

/* ── Old Manuscript / Aged Paper ── */
.manuscript {
  position: relative;
  background: linear-gradient(135deg, #2a2520 0%, #1e1a16 50%, #231f1b 100%);
  border: 1px solid rgba(226, 173, 68, 0.15);
  border-radius: 8px;
  padding: 1.5rem;
  overflow: hidden;
  font-family: 'Scheherazade New', serif;
}
.manuscript::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(226, 173, 68, 0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(226, 173, 68, 0.03) 0%, transparent 40%),
    radial-gradient(ellipse at 50% 80%, rgba(139, 69, 19, 0.05) 0%, transparent 40%);
  pointer-events: none;
}
.manuscript::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
  pointer-events: none;
}
.manuscript-text {
  position: relative;
  z-index: 1;
  color: rgba(226, 173, 68, 0.35);
  line-height: 2.2;
  font-size: 1.1rem;
  direction: rtl;
  text-align: right;
  letter-spacing: 0.02em;
}
.manuscript-fade {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60%;
  background: linear-gradient(to bottom, transparent 0%, #1e1a16 90%);
  z-index: 2;
  pointer-events: none;
}
/* ── Source text preview clamp ── */
.source-preview-clamp {
  display: -webkit-box;
  -webkit-line-clamp: 10;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.source-preview-fade {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 6rem;
  background: linear-gradient(to bottom, transparent 0%, rgb(var(--ink-800) / 0.95) 80%);
  pointer-events: none;
  border-radius: 0 0 0.75rem 0.75rem;
}

.work-icon {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Scheherazade New', serif;
  font-size: 1.1rem;
  font-weight: 700;
  flex-shrink: 0;
}
